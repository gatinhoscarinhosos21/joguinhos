 <!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Hello Kitty Platformer Rosa</title>
<style>
  body {
    margin: 0; background: #ffd1e8; font-family: 'Comic Sans MS', cursive;
  }
  #gameContainer {
    position: relative;
    width: 600px;
    height: 400px;
    background: #ffb6c1;
    margin: 20px auto;
    border: 3px solid #ff69b4;
    border-radius: 15px;
    overflow: hidden;
  }
  #kitty {
    position: absolute;
    width: 50px;
    height: 50px;
    background: url('https://i.imgur.com/wQh0v9k.png') no-repeat center/contain;
    /* Essa é uma imagem fofa da Hello Kitty */
    left: 100px;
    top: 0px;
    z-index: 10;
  }
  .platform {
    position: absolute;
    height: 15px;
    background: linear-gradient(90deg, #ff99cc, #ff66b2);
    border-radius: 10px;
    box-shadow: 0 0 8px #ff66b2;
  }
</style>
</head>
<body>
  <div id="gameContainer">
    <div id="kitty"></div>
    <!-- Plataformas serão criadas pelo JS -->
  </div>

<script>
const container = document.getElementById('gameContainer');
const kitty = document.getElementById('kitty');
const containerWidth = container.clientWidth;
const containerHeight = container.clientHeight;

const kittyState = {
  x: 100,
  y: 0,
  width: 50,
  height: 50,
  velocityY: 0,
  gravity: 0.7,
  jumpStrength: -12,
  onPlatform: false
};

const keys = { left: false, right: false, up: false };

// Criar plataformas
const platforms = [
  { x: 50, y: 350, width: 120, speed: 2, movingRight: true, element: null },
  { x: 250, y: 270, width: 140, speed: 3, movingRight: false, element: null },
  { x: 450, y: 190, width: 100, speed: 2.5, movingRight: true, element: null }
];

// Cria elementos HTML para plataformas e adiciona ao container
platforms.forEach(p => {
  const el = document.createElement('div');
  el.classList.add('platform');
  el.style.width = p.width + 'px';
  el.style.left = p.x + 'px';
  el.style.top = p.y + 'px';
  container.appendChild(el);
  p.element = el;
});

// Eventos de teclado para movimento
window.addEventListener('keydown', e => {
  if(e.key === 'ArrowLeft') keys.left = true;
  if(e.key === 'ArrowRight') keys.right = true;
  if(e.key === 'ArrowUp') keys.up = true;
});

window.addEventListener('keyup', e => {
  if(e.key === 'ArrowLeft') keys.left = false;
  if(e.key === 'ArrowRight') keys.right = false;
  if(e.key === 'ArrowUp') keys.up = false;
});

function update() {
  // Aplica gravidade
  kittyState.velocityY += kittyState.gravity;
  kittyState.y += kittyState.velocityY;

  // Movimento horizontal
  if(keys.left) kittyState.x -= 5;
  if(keys.right) kittyState.x += 5;

  // Limites laterais
  if(kittyState.x < 0) kittyState.x = 0;
  if(kittyState.x > containerWidth - kittyState.width) kittyState.x = containerWidth - kittyState.width;

  // Limita o topo
  if(kittyState.y < 0){
    kittyState.y = 0;
    kittyState.velocityY = 0;
  }

  // Move plataformas
  platforms.forEach(p => {
    if(p.movingRight){
      p.x += p.speed;
      if(p.x + p.width > containerWidth){
        p.x = containerWidth - p.width;
        p.movingRight = false;
      }
    } else {
      p.x -= p.speed;
      if(p.x < 0){
        p.x = 0;
        p.movingRight = true;
      }
    }
    p.element.style.left = p.x + 'px';
  });

  // Colisão
  kittyState.onPlatform = false;

  platforms.forEach(p => {
    const kittyBottom = kittyState.y + kittyState.height;
    const platformTop = p.y;
    const platformLeft = p.x;
    const platformRight = p.x + p.width;
    const kittyLeft = kittyState.x;
    const kittyRight = kittyState.x + kittyState.width;

    // Colisão só se Kitty estiver caindo
    if(kittyState.velocityY >= 0) {
      // Verifica se Kitty está sobre a plataforma horizontalmente
      if(kittyRight > platformLeft + 5 && kittyLeft < platformRight - 5) {
        // Verifica se Kitty está tocando a plataforma (topo)
        if(kittyBottom >= platformTop && kittyBottom <= platformTop + kittyState.velocityY + 1) {
          kittyState.y = platformTop - kittyState.height;
          kittyState.velocityY = 0;
          kittyState.onPlatform = true;

          // Kitty se move junto com a plataforma
          kittyState.x += (p.movingRight ? p.speed : -p.speed);
        }
      }
    }
  });

  // Pular
  if(keys.up && kittyState.onPlatform) {
    kittyState.velocityY = kittyState.jumpStrength;
    kittyState.onPlatform = false;
  }

  // Atualiza posição do DOM
  kitty.style.left = kittyState.x + 'px';
  kitty.style.top = kittyState.y + 'px';

  // Game over se cair fora da tela
  if(kittyState.y > containerHeight) {
    alert('Game Over! A Hello Kitty caiu!');
    // Resetar posição
    kittyState.x = 100;
    kittyState.y = 0;
    kittyState.velocityY = 0;
  }

  requestAnimationFrame(update);
}

// Iniciar loop
update();
</script>
</body>
</html>
